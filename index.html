<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Flag Arena</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background: radial-gradient(circle at center, #0f2027, #203a43, #000);
    font-family:Arial;
    color:white;
}

#arena{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
}

#eliminated{
    position:absolute;
    bottom:20px;
    width:100%;
    text-align:center;
    font-size:20px;
}

#topwins{
    position:absolute;
    top:20px;
    right:20px;
    background:rgba(0,0,0,0.6);
    padding:15px;
    border-radius:10px;
}
</style>
</head>
<body>

<canvas id="arena" width="600" height="600"></canvas>

<div id="topwins">
<b>TOP WINS</b>
<div id="winsList"></div>
</div>

<div id="eliminated"></div>

<script>
const canvas = document.getElementById("arena");
const ctx = canvas.getContext("2d");

const centerX = 300;
const centerY = 300;
const radius = 250;
const gapAngle = 0.5; // boÅŸluk geniÅŸliÄŸi

const eliminatedDiv = document.getElementById("eliminated");
const winsList = document.getElementById("winsList");

let wins = {};
let eliminatedFlags = [];

const flags = ["ğŸ‡ºğŸ‡¸","ğŸ‡¹ğŸ‡·","ğŸ‡©ğŸ‡ª","ğŸ‡«ğŸ‡·","ğŸ‡§ğŸ‡·","ğŸ‡¯ğŸ‡µ","ğŸ‡®ğŸ‡¹","ğŸ‡¬ğŸ‡§","ğŸ‡¨ğŸ‡¦","ğŸ‡¦ğŸ‡·","ğŸ‡ªğŸ‡¸","ğŸ‡°ğŸ‡·","ğŸ‡²ğŸ‡½","ğŸ‡³ğŸ‡±","ğŸ‡¨ğŸ‡­","ğŸ‡¸ğŸ‡ª","ğŸ‡³ğŸ‡´","ğŸ‡µğŸ‡¹","ğŸ‡¬ğŸ‡·","ğŸ‡®ğŸ‡³"];

let particles = [];

function init(){
    particles=[];
    eliminatedFlags=[];
    eliminatedDiv.innerHTML="";
    for(let i=0;i<flags.length;i++){
        particles.push({
            flag:flags[i],
            x:centerX,
            y:centerY,
            vx:(Math.random()-0.5)*6,
            vy:(Math.random()-0.5)*6,
            radius:20
        });
    }
}
init();

function drawArena(){
    ctx.clearRect(0,0,600,600);

    ctx.beginPath();
    ctx.arc(centerX,centerY,radius,gapAngle,Math.PI*2-gapAngle);
    ctx.strokeStyle="#00ffff";
    ctx.lineWidth=6;
    ctx.stroke();
}

function update(){
    drawArena();

    particles.forEach((p,index)=>{
        p.x+=p.vx;
        p.y+=p.vy;

        let dx=p.x-centerX;
        let dy=p.y-centerY;
        let dist=Math.sqrt(dx*dx+dy*dy);

        if(dist + p.radius > radius){
            let angle=Math.atan2(dy,dx);

            if(angle > -gapAngle && angle < gapAngle){
                eliminatedFlags.push(p.flag);
                particles.splice(index,1);
                updateEliminated();
                if(particles.length===1){
                    declareWinner(particles[0].flag);
                }
                return;
            }

            let nx=dx/dist;
            let ny=dy/dist;
            let dot=p.vx*nx+p.vy*ny;
            p.vx-=2*dot*nx;
            p.vy-=2*dot*ny;
        }

        ctx.font="28px Arial";
        ctx.textAlign="center";
        ctx.textBaseline="middle";
        ctx.fillText(p.flag,p.x,p.y);
    });

    requestAnimationFrame(update);
}
update();

function updateEliminated(){
    eliminatedDiv.innerHTML=eliminatedFlags.map(f=>f).join(" ");
}

function declareWinner(flag){
    wins[flag]=(wins[flag]||0)+1;
    updateTopWins();
    setTimeout(init,2000);
}

function updateTopWins(){
    let sorted=Object.entries(wins).sort((a,b)=>b[1]-a[1]).slice(0,3);
    winsList.innerHTML=sorted.map(w=>`${w[0]} - ${w[1]}`).join("<br>");
}
</script>

</body>
</html>
