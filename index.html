<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Flag Arena</title>
<style>
body{
  margin:0;
  overflow:hidden;
  background:#0d1321;
  font-family:Arial;
  color:white;
}

canvas{
  display:block;
  margin:auto;
}

#eliminated{
  position:absolute;
  bottom:20px;
  width:100%;
  text-align:center;
  font-size:22px;
}
</style>
</head>
<body>

<canvas id="arena"></canvas>
<div id="eliminated"></div>

<script>

const canvas=document.getElementById("arena");
const ctx=canvas.getContext("2d");

function resize(){
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
}
resize();
window.addEventListener("resize",resize);

function CX(){ return canvas.width/2 }
function CY(){ return canvas.height/2 }

const arenaRadius=Math.min(window.innerWidth,window.innerHeight)/3;
let rotation=0;

const flags=[
"ðŸ‡ºðŸ‡¸","ðŸ‡¹ðŸ‡·","ðŸ‡©ðŸ‡ª","ðŸ‡«ðŸ‡·","ðŸ‡§ðŸ‡·","ðŸ‡¯ðŸ‡µ","ðŸ‡®ðŸ‡¹","ðŸ‡¬ðŸ‡§","ðŸ‡¨ðŸ‡¦","ðŸ‡¦ðŸ‡·",
"ðŸ‡ªðŸ‡¸","ðŸ‡°ðŸ‡·","ðŸ‡²ðŸ‡½","ðŸ‡³ðŸ‡±","ðŸ‡¨ðŸ‡­","ðŸ‡¸ðŸ‡ª","ðŸ‡³ðŸ‡´","ðŸ‡µðŸ‡¹","ðŸ‡¬ðŸ‡·","ðŸ‡®ðŸ‡³",
"ðŸ‡¨ðŸ‡³","ðŸ‡·ðŸ‡º","ðŸ‡¦ðŸ‡º","ðŸ‡³ðŸ‡¿","ðŸ‡¿ðŸ‡¦","ðŸ‡ªðŸ‡¬","ðŸ‡¸ðŸ‡¦","ðŸ‡¦ðŸ‡ª","ðŸ‡®ðŸ‡·","ðŸ‡®ðŸ‡¶"
];

let particles=[];
let eliminated=[];

function init(){
  particles=[];
  eliminated=[];
  flags.forEach(flag=>{
    particles.push({
      flag:flag,
      x:CX()+(Math.random()-0.5)*200,
      y:CY()+(Math.random()-0.5)*200,
      vx:(Math.random()-0.5)*12, // hÄ±zlÄ±
      vy:(Math.random()-0.5)*12,
      r:18
    });
  });
}
init();

function drawArena(){
  rotation+=0.02;

  ctx.save();
  ctx.translate(CX(),CY());
  ctx.rotate(rotation);

  ctx.beginPath();
  ctx.arc(0,0,arenaRadius,0.6,Math.PI*2-0.6);
  ctx.strokeStyle="#00ffff";
  ctx.lineWidth=6;
  ctx.stroke();

  ctx.restore();
}

function update(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawArena();

  for(let i=0;i<particles.length;i++){
    let p=particles[i];

    p.x+=p.vx;
    p.y+=p.vy;

    let dx=p.x-CX();
    let dy=p.y-CY();
    let dist=Math.sqrt(dx*dx+dy*dy);

    if(dist+p.r>arenaRadius){

      let angle=Math.atan2(dy,dx)-rotation;

      // normalize angle
      while(angle<-Math.PI) angle+=Math.PI*2;
      while(angle>Math.PI) angle-=Math.PI*2;

      if(angle>-0.6 && angle<0.6){
        eliminated.push(p.flag);
        particles.splice(i,1);
        document.getElementById("eliminated").innerText=eliminated.join(" ");
        i--;
        continue;
      }

      let nx=dx/dist;
      let ny=dy/dist;
      let dot=p.vx*nx+p.vy*ny;
      p.vx-=2*dot*nx;
      p.vy-=2*dot*ny;
    }

    // Ã§arpÄ±ÅŸma
    for(let j=i+1;j<particles.length;j++){
      let p2=particles[j];
      let dx2=p2.x-p.x;
      let dy2=p2.y-p.y;
      let d=Math.sqrt(dx2*dx2+dy2*dy2);

      if(d<p.r+p2.r){
        let nx=dx2/d;
        let ny=dy2/d;
        let pDot=p.vx*nx+p.vy*ny;
        let p2Dot=p2.vx*nx+p2.vy*ny;
        p.vx+=(p2Dot-pDot)*nx;
        p.vy+=(p2Dot-pDot)*ny;
        p2.vx+=(pDot-p2Dot)*nx;
        p2.vy+=(pDot-p2Dot)*ny;
      }
    }

    ctx.font="28px Arial";
    ctx.textAlign="center";
    ctx.textBaseline="middle";
    ctx.fillText(p.flag,p.x,p.y);
  }

  requestAnimationFrame(update);
}

update();

</script>
</body>
</html>
