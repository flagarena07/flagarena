<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>FLAG ARENA</title>
<style>
body{
    margin:0;
    background:#0e0e0e;
    font-family:Arial, Helvetica, sans-serif;
    overflow:hidden;
    color:white;
}

#backgroundText{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:120px;
    font-weight:900;
    color:white;
    opacity:0.05;
    pointer-events:none;
    white-space:nowrap;
}

#arena{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    width:600px;
    height:600px;
    border-radius:50%;
    border:6px solid #ffffff22;
}

.flag{
    position:absolute;
    width:70px;
    text-align:center;
    font-size:12px;
}

.flag img{
    width:60px;
    height:40px;
    border-radius:4px;
}

#countdown{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:100px;
    font-weight:bold;
}

#winner{
    position:absolute;
    top:20px;
    left:50%;
    transform:translateX(-50%);
    font-size:28px;
    font-weight:bold;
}

#topWins{
    position:absolute;
    right:20px;
    top:20px;
    width:220px;
}

#topWins h2{
    margin:0 0 10px 0;
    text-align:center;
}

.winItem{
    display:flex;
    align-items:center;
    margin-bottom:6px;
    font-size:14px;
}

.winItem img{
    width:30px;
    height:20px;
    margin-right:8px;
}
</style>
</head>
<body>

<div id="backgroundText">FLAG ARENA</div>
<div id="winner"></div>
<div id="arena"></div>
<div id="countdown"></div>

<div id="topWins">
<h2>TOP 10 WINS</h2>
<div id="winsList"></div>
</div>

<script>

const countries = [
"tr","us","de","fr","it","es","br","ar","jp","cn",
"ru","gb","ca","mx","kr","sa","au","in","nl","ch",
"se","no","fi","dk","pl","be","gr","pt","ua","ro",
"bg","cz","hu","at","ie","il","eg","za","th","id"
];

// 40 Ã¶rnek koydum. Ä°stersen 195 ISO kod listesi ekleyebilirim.

const arena = document.getElementById("arena");
const countdownEl = document.getElementById("countdown");
const winnerEl = document.getElementById("winner");
const winsList = document.getElementById("winsList");

let angle = 0;
let speed = 0.05; // Sabit hÄ±zlÄ±
let flags = [];
let wins = {};

function createFlags(){
    arena.innerHTML="";
    flags=[];
    const radius = 250;
    const center = 300;

    countries.forEach((code,i)=>{
        const div = document.createElement("div");
        div.className="flag";
        div.innerHTML=`
            <img src="https://flagcdn.com/w80/${code}.png">
            <div>${code.toUpperCase()}</div>
        `;
        arena.appendChild(div);

        flags.push({
            el:div,
            angle:(2*Math.PI/countries.length)*i
        });
    });
}

function updatePositions(){
    const radius=250;
    const center=300;

    flags.forEach(f=>{
        const x=center + radius*Math.cos(f.angle) - 35;
        const y=center + radius*Math.sin(f.angle) - 25;
        f.el.style.left=x+"px";
        f.el.style.top=y+"px";
        f.angle += speed;
    });

    requestAnimationFrame(updatePositions);
}

function startCountdown(){
    let count=10;
    countdownEl.innerText=count;

    const interval=setInterval(()=>{
        count--;
        countdownEl.innerText=count;

        if(count===0){
            clearInterval(interval);
            countdownEl.innerText="";
            startGame();
        }
    },1000);
}

function startGame(){
    setTimeout(()=>{
        const winner = countries[Math.floor(Math.random()*countries.length)];
        winnerEl.innerText="ðŸ† Winner: "+winner.toUpperCase();

        if(!wins[winner]) wins[winner]=0;
        wins[winner]++;
        updateTopWins();

    },5000);
}

function updateTopWins(){
    winsList.innerHTML="";
    const sorted = Object.entries(wins)
        .sort((a,b)=>b[1]-a[1])
        .slice(0,10);

    sorted.forEach(([code,count],i)=>{
        const div=document.createElement("div");
        div.className="winItem";
        div.innerHTML=`
            <img src="https://flagcdn.com/w40/${code}.png">
            ${i+1}. ${code.toUpperCase()} - ${count}
        `;
        winsList.appendChild(div);
    });
}

createFlags();
updatePositions();
startCountdown();

</script>
</body>
</html>
