<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>FLAG ARENA</title>
<style>
body{
    margin:0;
    background:#0f0f0f;
    font-family:Arial, Helvetica, sans-serif;
    overflow:hidden;
    color:white;
}

#backgroundText{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:140px;
    font-weight:900;
    opacity:0.04;
    pointer-events:none;
    white-space:nowrap;
}

#arena{
    position:fixed;
    top:50%;
    left:50%;
    width:650px;
    height:650px;
    transform:translate(-50%,-50%);
    border-radius:50%;
}

.flag{
    position:absolute;
    width:80px;
    text-align:center;
    font-size:12px;
    transform:translate(-50%,-50%);
}

.flag img{
    width:60px;
    height:40px;
    border-radius:4px;
}

#countdown{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:110px;
    font-weight:bold;
}

#winner{
    position:fixed;
    top:20px;
    left:50%;
    transform:translateX(-50%);
    font-size:28px;
    font-weight:bold;
}

#topWins{
    position:fixed;
    right:20px;
    top:20px;
    width:230px;
}

#topWins h2{
    text-align:center;
    margin-bottom:10px;
}

.winItem{
    display:flex;
    align-items:center;
    margin-bottom:6px;
    font-size:14px;
}

.winItem img{
    width:30px;
    height:20px;
    margin-right:8px;
}
</style>
</head>
<body>

<div id="backgroundText">FLAG ARENA</div>
<div id="arena"></div>
<div id="countdown"></div>
<div id="winner"></div>

<div id="topWins">
<h2>TOP 10 WINS</h2>
<div id="winsList"></div>
</div>

<script>

const countries = [
"tr","us","de","fr","it","es","br","ar","jp","cn",
"ru","gb","ca","mx","kr","sa","au","in","nl","ch",
"se","no","fi","dk","pl","be","gr","pt","ua","ro",
"bg","cz","hu","at","ie","il","eg","za","th","id"
];

const arena = document.getElementById("arena");
const countdownEl = document.getElementById("countdown");
const winnerEl = document.getElementById("winner");
const winsList = document.getElementById("winsList");

let flags = [];
let wins = {};
let rotation = 0;
let lastTime = 0;
const speed = 1.2; // radians per second (yÃ¼ksek sabit hÄ±z)

function createFlags(){
    const radius = 300;
    const center = 325;

    countries.forEach((code,i)=>{
        const div = document.createElement("div");
        div.className="flag";
        div.innerHTML=`
            <img src="https://flagcdn.com/w80/${code}.png">
            <div>${code.toUpperCase()}</div>
        `;
        arena.appendChild(div);

        flags.push({
            el:div,
            baseAngle:(2*Math.PI/countries.length)*i
        });
    });
}

function animate(time){
    if(!lastTime) lastTime = time;
    const delta = (time - lastTime) / 1000;
    lastTime = time;

    rotation += speed * delta;

    const radius = 300;
    const center = 325;

    flags.forEach(f=>{
        const angle = f.baseAngle + rotation;
        const x = center + radius*Math.cos(angle);
        const y = center + radius*Math.sin(angle);
        f.el.style.left = x + "px";
        f.el.style.top = y + "px";
    });

    requestAnimationFrame(animate);
}

function startCountdown(){
    let count = 10;
    countdownEl.innerText = count;

    const interval = setInterval(()=>{
        count--;
        countdownEl.innerText = count;

        if(count === 0){
            clearInterval(interval);
            countdownEl.innerText = "";
            startGame();
        }
    },1000);
}

function startGame(){
    setTimeout(()=>{
        const winner = countries[Math.floor(Math.random()*countries.length)];
        winnerEl.innerText = "ðŸ† Winner: " + winner.toUpperCase();

        if(!wins[winner]) wins[winner] = 0;
        wins[winner]++;
        updateTopWins();
    },4000);
}

function updateTopWins(){
    winsList.innerHTML="";
    const sorted = Object.entries(wins)
        .sort((a,b)=>b[1]-a[1])
        .slice(0,10);

    sorted.forEach(([code,count],i)=>{
        const div=document.createElement("div");
        div.className="winItem";
        div.innerHTML=`
            <img src="https://flagcdn.com/w40/${code}.png">
            ${i+1}. ${code.toUpperCase()} - ${count}
        `;
        winsList.appendChild(div);
    });
}

createFlags();
requestAnimationFrame(animate);
startCountdown();

</script>
</body>
</html>
